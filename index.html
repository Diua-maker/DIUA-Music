<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIUA Music</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --primary-color: #5D5CDE;
            --primary-hover: #4a49b7;
            --background-dark: #181818;
            --background-darker: #121212;
            --background-lighter: #282828;
            --text-primary: #FFFFFF;
            --text-secondary: #B3B3B3;
            --text-tertiary: #686868;
            --button-hover: rgba(255, 255, 255, 0.1);
            --card-background: #232323;
            --border-color: #333333;
        }

        /* Light theme styles */
        :root:not(.dark) {
            --background-dark: #FFFFFF;
            --background-darker: #F8F9FA;
            --background-lighter: #F1F3F4;
            --text-primary: #202124;
            --text-secondary: #5F6368;
            --text-tertiary: #9AA0A6;
            --button-hover: rgba(0, 0, 0, 0.1);
            --card-background: #FFFFFF;
            --border-color: #E8EAED;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: var(--background-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* === LAYOUT === */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .content-area {
            flex: 1;
            padding: 20px;
            margin-top: 70px;
            margin-left: 0;
            margin-bottom: 80px;
            transition: all 0.3s ease;
        }

        /* === HEADER === */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(24, 24, 24, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .logo-img {
            height: 40px;
            transition: transform 0.3s ease;
            width: auto;
            max-width: 100px;
        }

        .logo-img:hover {
            transform: scale(1.05);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary-color);
            text-decoration: none;
        }

        .search-bar {
            margin-left: auto;
            position: relative;
            width: 280px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px;
            padding-left: 40px;
            background: var(--background-lighter);
            border: none;
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-bar input:focus {
            outline: none;
            background: var(--card-background);
            box-shadow: 0 0 0 2px var(--primary-color);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            opacity: 0.7;
        }

        /* === SIDEBAR === */
        .sidebar {
            position: fixed;
            left: 0;
            bottom: 0;
            right: 0;
            height: 70px;
            background: rgba(24, 24, 24, 0.98);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 99;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);
            padding: 0 10px;
        }

        .sidebar-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            border-radius: 12px;
            flex: 1;
            max-width: 80px;
            cursor: pointer;
        }

        .sidebar-item i {
            font-size: 1.3rem;
            margin-bottom: 4px;
            transition: all 0.3s ease;
        }

        .sidebar-item span {
            font-size: 11px;
            font-weight: 500;
            text-align: center;
            line-height: 1;
        }

        .sidebar-item:hover, .sidebar-item.active {
            color: var(--primary-color);
            background: rgba(93, 92, 222, 0.1);
            transform: translateY(-2px);
        }

        .sidebar-item.active i {
            color: var(--primary-color);
            transform: scale(1.1);
        }

        /* === PAGES === */
        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* === HOME PAGE === */
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 20px;
            padding: 30px 25px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            pointer-events: none;
        }

        .hero h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            max-width: 80%;
        }

        .hero p {
            max-width: 600px;
            margin-bottom: 25px;
            line-height: 1.6;
            opacity: 0.9;
            font-size: 1rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background: var(--text-primary);
            color: var(--background-dark);
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 16px;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .section-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            margin-top: 40px;
            position: relative;
            padding-left: 15px;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            bottom: 5px;
            width: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .section-title i {
            color: var(--primary-color);
            margin-right: 10px;
        }

        .music-container {
            position: relative;
            margin-bottom: 40px;
        }

        .music-scroll {
            display: flex;
            overflow-x: auto;
            padding: 1rem 0;
            gap: 16px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--background-lighter);
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .music-scroll::-webkit-scrollbar {
            height: 6px;
        }

        .music-scroll::-webkit-scrollbar-track {
            background: var(--background-lighter);
            border-radius: 3px;
        }

        .music-scroll::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 3px;
        }

        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(40, 40, 40, 0.9);
            color: var(--text-primary);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .scroll-btn:hover {
            background-color: var(--primary-color);
            transform: translateY(-50%) scale(1.1);
        }

        .scroll-left {
            left: 10px;
        }

        .scroll-right {
            right: 10px;
        }

        .music-card {
            min-width: 160px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .music-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-color);
        }

        .music-cover {
            position: relative;
            height: 160px;
            overflow: hidden;
        }

        .music-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .music-card:hover .music-cover img {
            transform: scale(1.08);
        }

        .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .music-card:hover .play-overlay {
            opacity: 1;
        }

        .play-btn {
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transform: scale(0.8);
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 15px rgba(93, 92, 222, 0.4);
        }

        .play-btn:hover {
            transform: scale(1);
            background: var(--primary-hover);
        }

        .music-info {
            padding: 16px;
        }

        .music-title {
            font-weight: 600;
            margin-bottom: 6px;
            transition: color 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 14px;
            line-height: 1.3;
        }

        .music-card:hover .music-title {
            color: var(--primary-color);
        }

        .music-artist {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-details {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-tertiary);
        }

        .music-details div {
            display: flex;
            align-items: center;
        }

        .music-details i {
            margin-right: 4px;
        }

        .platform-indicator {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.8);
            color: var(--text-primary);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Grid Layout for full pages */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 16px;
        }

        /* Page headers */
        .page-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            border-radius: 20px;
            padding: 30px 25px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .page-header::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            pointer-events: none;
        }

        .page-header h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .page-description {
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            line-height: 1.5;
        }

        /* Genre buttons */
        .genre-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 30px;
        }

        .genre-button {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: none;
            border-radius: 16px;
            padding: 16px 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: 500;
        }

        .genre-button:hover {
            background: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(93, 92, 222, 0.3);
        }

        .genre-button i {
            margin-right: 8px;
            font-size: 16px;
        }

        /* Artist and Album Cards */
        .artist-card, .album-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .artist-card:hover, .album-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-color);
        }

        .artist-img, .album-cover {
            width: 100%;
            height: 160px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .artist-card:hover .artist-img, .album-card:hover .album-cover {
            transform: scale(1.08);
        }

        .artist-info, .album-info {
            padding: 16px;
        }

        .artist-name, .album-title {
            font-weight: 600;
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 14px;
        }

        .artist-genre, .album-artist {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .album-details {
            font-size: 11px;
            color: var(--text-tertiary);
            display: flex;
            justify-content: space-between;
        }

        /* Content sections for about/faq pages */
        .content-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .content-section h3 {
            color: var(--primary-color);
            margin-bottom: 16px;
            font-size: 1.2rem;
        }

        .content-section p {
            line-height: 1.6;
            margin-bottom: 12px;
            font-size: 15px;
        }

        .faq-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .faq-question {
            background: rgba(255, 255, 255, 0.1);
            padding: 16px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
            font-weight: 500;
        }

        .faq-question:hover {
            background: var(--primary-color);
        }

        .faq-answer {
            padding: 0 16px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-answer.active {
            padding: 16px;
            max-height: 300px;
        }

        .integration-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .integration-icon {
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .integration-info h4 {
            margin-bottom: 6px;
            font-size: 16px;
        }

        .integration-info p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Artist and Album pages */
        .artist-page, .album-page {
            display: none;
            padding: 0;
        }

        .artist-page.active, .album-page.active {
            display: block;
        }

        .artist-header, .album-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .artist-image, .album-image {
            width: 150px;
            height: 150px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
        }

        .artist-details, .album-details {
            flex: 1;
        }

        .artist-name-large, .album-title-large {
            font-size: 1.6rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .artist-genre-large, .album-artist-large {
            color: var(--primary-color);
            font-size: 1rem;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .artist-bio, .album-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 14px;
        }

        /* Search results */
        .search-results {
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-title {
            margin-bottom: 24px;
            font-size: 1.4rem;
        }

        .search-title span {
            color: var(--primary-color);
        }

        .search-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .search-empty i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        /* === MUSIC PLAYER === */
        .music-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--background-darker), var(--background-dark));
            display: none;
            z-index: 999;
            justify-content: center;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 16px;
        }

        .music-player {
            background: linear-gradient(145deg, var(--background-lighter), var(--background-dark));
            border-radius: 24px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            position: relative;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transform: scale(0.9);
            animation: playerEnter 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes playerEnter {
            to {
                transform: scale(1);
            }
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 20px 0 20px;
            position: sticky;
            top: 0;
            background: linear-gradient(145deg, var(--background-lighter), var(--background-dark));
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 1;
        }

        .player-title {
            font-weight: 600;
            font-size: 16px;
        }

        .player-controls {
            display: flex;
            gap: 12px;
        }

        .minimize-player, .close-player {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 12px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .minimize-player:hover, .close-player:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            transform: scale(1.05);
        }

        .player-cover {
            width: calc(100% - 40px);
            height: 300px;
            position: relative;
            margin: 20px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .player-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-info {
            padding: 0 20px 20px 20px;
            text-align: center;
        }

        .player-song-title {
            font-size: 1.5rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .player-song-artist {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: 500;
        }

        .player-song-details {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 30px;
        }

        .progress-container {
            background-color: var(--border-color);
            height: 6px;
            width: 100%;
            border-radius: 3px;
            margin-bottom: 12px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-hover));
            height: 100%;
            width: 0;
            border-radius: 3px;
            transition: width 0.1s linear;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background-color: var(--primary-color);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .progress-container:hover .progress-bar::after {
            opacity: 1;
        }

        .time-container {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
            padding: 12px;
            border-radius: 50%;
        }

        .control-btn:hover {
            color: var(--primary-color);
            background-color: var(--button-hover);
            transform: scale(1.1);
        }

        .control-btn.main {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: var(--text-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 8px 20px rgba(93, 92, 222, 0.3);
        }

        .control-btn.main:hover {
            background: linear-gradient(135deg, var(--primary-hover), var(--primary-color));
            transform: scale(1.05);
            box-shadow: 0 12px 25px rgba(93, 92, 222, 0.4);
        }

        .download-btn {
            margin: 16px auto 0 auto;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
            color: var(--text-primary);
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            max-width: 200px;
            font-size: 14px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(93, 92, 222, 0.3);
        }

        /* === MINI PLAYER === */
        .mini-player {
            position: fixed;
            bottom: 70px;
            left: 0;
            right: 0;
            background: rgba(20, 20, 30, 0.98);
            backdrop-filter: blur(15px);
            height: 0;
            transition: height 0.3s ease;
            overflow: hidden;
            z-index: 98;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
        }

        .mini-player.active {
            height: 70px;
        }

        .mini-player-content {
            display: flex;
            align-items: center;
            height: 100%;
            padding: 0 16px;
        }

        .mini-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.1s linear;
        }

        .mini-player-cover {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .mini-player-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .mini-player-info {
            flex: 1;
            cursor: pointer;
            min-width: 0;
        }

        .mini-player-title {
            font-size: 14px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }

        .mini-player-artist {
            font-size: 12px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .mini-player-controls {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-shrink: 0;
        }

        .mini-control-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
            padding: 8px;
        }

        .mini-control-btn:hover {
            color: var(--primary-color);
            transform: scale(1.1);
        }

        /* === LOADING === */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .loading.active {
            display: flex;
        }

        .musical-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .headphones-icon {
            font-size: 3rem;
            color: var(--primary-color);
            animation: headphonesPulse 1.5s ease-in-out infinite;
        }

        .loading-dots {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .loading-dot {
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 50%;
            animation: dotBounce 0.6s ease-in-out infinite;
        }

        .loading-dot:nth-child(1) { animation-delay: 0s; }
        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes headphonesPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes dotBounce {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.3); opacity: 1; }
        }

        .loading-text {
            margin-top: 16px;
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 500;
            text-align: center;
        }

        /* Error message styles */
        .error-message {
            background-color: #dc3545;
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            text-align: center;
            font-weight: 500;
        }

        /* === MOBILE OPTIMIZATIONS === */
        @media screen and (max-width: 768px) {
            .content-area {
                padding: 16px;
                margin-bottom: 140px;
            }

            .search-bar {
                width: 200px;
            }

            .hero {
                padding: 24px 20px;
            }

            .hero h1 {
                font-size: 1.8rem;
            }

            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }

            .music-card {
                min-width: 140px;
            }

            .music-cover {
                height: 140px;
            }

            .section-title {
                font-size: 1.2rem;
            }

            .artist-header, .album-header {
                flex-direction: column;
                text-align: center;
                gap: 16px;
            }

            .artist-image, .album-image {
                width: 120px;
                height: 120px;
            }

            .content-section {
                padding: 20px;
            }

            .integration-card {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }

            .player-cover {
                height: 280px;
                margin: 16px;
                width: calc(100% - 32px);
            }

            .player-song-title {
                font-size: 1.3rem;
            }

            .controls {
                gap: 16px;
            }

            .control-btn.main {
                width: 55px;
                height: 55px;
                font-size: 20px;
            }
        }

        @media screen and (max-width: 480px) {
            .content-area {
                padding: 12px;
            }

            .search-bar {
                width: 160px;
            }

            .search-bar input {
                padding: 8px 12px;
                padding-left: 35px;
                font-size: 14px;
            }

            .hero {
                padding: 20px 16px;
            }

            .hero h1 {
                font-size: 1.6rem;
            }

            .genre-buttons {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .genre-button {
                padding: 14px 16px;
            }

            .grid-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 10px;
            }

            .music-card {
                min-width: 120px;
            }

            .music-cover {
                height: 120px;
            }

            .music-title {
                font-size: 13px;
            }

            .music-artist {
                font-size: 11px;
            }

            .sidebar-item {
                padding: 6px 8px;
            }

            .sidebar-item i {
                font-size: 1.2rem;
            }

            .sidebar-item span {
                font-size: 10px;
            }
        }

        /* Theme transition */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <a href="#" class="logo" onclick="showPage('home')">
                <img src="diua_music_transparent.png" alt="DIUA Music Logo" class="logo-img">
                <span>DIUA Music</span>
            </a>
            <div class="search-bar">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Buscar música, artista..." id="searchInput">
            </div>
        </header>

        <!-- Sidebar -->
        <div class="sidebar">
            <a href="#" class="sidebar-item active" onclick="showPage('home')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#" class="sidebar-item" onclick="showPage('musicas')">
                <i class="fas fa-music"></i>
                <span>Músicas</span>
            </a>
            <a href="#" class="sidebar-item" onclick="showPage('artistas')">
                <i class="fas fa-users"></i>
                <span>Artistas</span>
            </a>
            <a href="#" class="sidebar-item" onclick="showPage('albuns')">
                <i class="fas fa-compact-disc"></i>
                <span>Álbuns</span>
            </a>
            <a href="#" class="sidebar-item" onclick="showPage('sobre')">
                <i class="fas fa-info-circle"></i>
                <span>Sobre</span>
            </a>
            <a href="#" class="sidebar-item" onclick="showPage('faq')">
                <i class="fas fa-question-circle"></i>
                <span>FAQ</span>
            </a>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Home page -->
            <div class="page active" id="home">
                <div class="hero">
                    <h1>DIUA Music</h1>
                    <p>Nossos talentos locais são o nosso tesouro.</p>
                    <a href="#" class="btn" onclick="showPage('musicas')">
                        <i class="fas fa-play"></i>
                        Explorar Música
                    </a>
                </div>

                <div class="genre-buttons">
                    <a href="#" class="genre-button" onclick="showPage('musicas')">
                        <i class="fas fa-music"></i> Todas as Músicas
                    </a>
                    <a href="#" class="genre-button" onclick="showGenre('kizomba')">
                        <i class="fas fa-guitar"></i> Kizomba
                    </a>
                    <a href="#" class="genre-button" onclick="showGenre('rap')">
                        <i class="fas fa-microphone"></i> Rap
                    </a>
                    <a href="#" class="genre-button" onclick="showPage('artistas')">
                        <i class="fas fa-users"></i> Artistas
                    </a>
                </div>

                <h2 class="section-title">
                    <i class="fas fa-clock"></i> Músicas Recentes
                </h2>
                <div class="music-container">
                    <button class="scroll-btn scroll-left" onclick="scrollMusic('recent', -1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="music-scroll" id="recentMusic">
                        <!-- Music cards will be inserted here by JavaScript -->
                    </div>
                    <button class="scroll-btn scroll-right" onclick="scrollMusic('recent', 1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <h2 class="section-title">
                    <i class="fas fa-fire"></i> Músicas Populares
                </h2>
                <div class="music-container">
                    <button class="scroll-btn scroll-left" onclick="scrollMusic('popular', -1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="music-scroll" id="popularMusic">
                        <!-- Music cards will be inserted here by JavaScript -->
                    </div>
                    <button class="scroll-btn scroll-right" onclick="scrollMusic('popular', 1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Músicas page -->
            <div class="page" id="musicas">
                <div class="page-header">
                    <h2>Todas as Músicas</h2>
                    <p class="page-description">Explore nossa vasta coleção de músicas de diferentes gêneros e artistas.</p>
                </div>
                <div class="grid-container" id="allMusic">
                    <!-- Music cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Artistas page -->
            <div class="page" id="artistas">
                <div class="page-header">
                    <h2>Artistas</h2>
                    <p class="page-description">Conheça os artistas por trás das músicas que você ama.</p>
                </div>
                <div class="grid-container" id="allArtists">
                    <!-- Artist cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Álbuns page -->
            <div class="page" id="albuns">
                <div class="page-header">
                    <h2>Álbuns</h2>
                    <p class="page-description">Descubra álbuns completos e mergulhe nas histórias que eles contam.</p>
                </div>
                <div class="grid-container" id="allAlbums">
                    <!-- Album cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Sobre Nós page -->
            <div class="page" id="sobre">
                <div class="page-header">
                    <h2>Sobre Nós</h2>
                    <p class="page-description">Conheça nossa missão de promover e apoiar o talento musical local.</p>
                </div>
                
                <div class="content-section">
                    <h3>Nossa Missão</h3>
                    <p>A DIUA Music foi criada com o objetivo de valorizar e promover os talentos musicais locais. Acreditamos que a música é uma forma poderosa de expressão cultural e queremos proporcionar uma plataforma onde artistas emergentes possam compartilhar sua arte com o mundo.</p>
                    <p>Nossa plataforma conecta artistas e ouvintes, criando uma comunidade vibrante onde a música local pode florescer e alcançar novos públicos.</p>
                </div>

                <div class="content-section">
                    <h3>Nossa Visão</h3>
                    <p>Ser a principal plataforma de descoberta e promoção de música local, criando oportunidades para artistas independentes crescerem e se conectarem com seus fãs.</p>
                </div>

                <div class="content-section">
                    <h3>Nossos Valores</h3>
                    <p><strong>Autenticidade:</strong> Valorizamos a originalidade e a expressão genuína dos artistas.</p>
                    <p><strong>Comunidade:</strong> Construímos pontes entre artistas e ouvintes, criando conexões significativas.</p>
                    <p><strong>Diversidade:</strong> Celebramos todos os gêneros musicais e estilos artísticos.</p>
                    <p><strong>Inovação:</strong> Utilizamos tecnologia para melhorar a experiência musical de todos.</p>
                </div>

                <div class="content-section">
                    <h3>Integrações de Plataformas</h3>
                    <div class="integration-card">
                        <div class="integration-icon">
                            <i class="fab fa-youtube"></i>
                        </div>
                        <div class="integration-info">
                            <h4>YouTube</h4>
                            <p>Integração completa com vídeos musicais e clipes dos artistas</p>
                        </div>
                    </div>
                    
                    <div class="integration-card">
                        <div class="integration-icon">
                            <i class="fab fa-spotify"></i>
                        </div>
                        <div class="integration-info">
                            <h4>Spotify</h4>
                            <p>Acesso direto às playlists e álbuns disponíveis no Spotify</p>
                        </div>
                    </div>
                    
                    <div class="integration-card">
                        <div class="integration-icon">
                            <i class="fab fa-soundcloud"></i>
                        </div>
                        <div class="integration-info">
                            <h4>SoundCloud</h4>
                            <p>Reprodução de faixas exclusivas e demos dos artistas</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ page -->
            <div class="page" id="faq">
                <div class="page-header">
                    <h2>Perguntas Frequentes</h2>
                    <p class="page-description">Encontre respostas para as dúvidas mais comuns sobre a DIUA Music.</p>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Como posso adicionar minha música à plataforma?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Para adicionar sua música, entre em contato conosco através do email contato@diuamusic.com. Envie suas faixas em formato MP3 ou WAV, junto com as informações do artista, álbum e capa. Nossa equipe irá revisar e adicionar sua música à plataforma.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>A plataforma é gratuita?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Sim! A DIUA Music é gratuita para ouvintes. Oferecemos acesso livre a todo nosso catálogo de música local. Para artistas, oferecemos hospedagem de suas músicas a um valor amigável.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Posso baixar as músicas?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>O download das músicas depende da autorização do artista. Algumas faixas estão disponíveis para download gratuito, enquanto outras são apenas para streaming. Verifique o botão de download no player da música.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Como funciona a integração com outras plataformas?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Nossa plataforma se integra com YouTube, Spotify e SoundCloud para oferecer uma experiência completa. Quando disponível, você pode ouvir a música diretamente de outras plataformas sem sair do nosso site.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Como posso entrar em contato com um artista?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Na página do artista, você encontrará links para suas redes sociais e informações de contato, quando disponibilizadas. Respeitamos a privacidade dos artistas e só compartilhamos informações que eles autorizam.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>A plataforma funciona no celular?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Sim! A DIUA Music é totalmente responsiva e funciona perfeitamente em smartphones e tablets. Você pode acessar através do navegador do seu dispositivo móvel e ter uma experiência otimizada.</p>
                    </div>
                </div>
            </div>

            <!-- Genre pages -->
            <div class="page" id="kizomba">
                <div class="page-header">
                    <h2>Kizomba</h2>
                    <p class="page-description">Descubra as melhores músicas e artistas de Kizomba.</p>
                </div>
                <div class="grid-container" id="kizombaMusic">
                    <!-- Music cards will be inserted here by JavaScript -->
                </div>
            </div>

            <div class="page" id="rap">
                <div class="page-header">
                    <h2>Rap</h2>
                    <p class="page-description">Explore o mundo do Rap com os melhores artistas e faixas.</p>
                </div>
                <div class="grid-container" id="rapMusic">
                    <!-- Music cards will be inserted here by JavaScript -->
                </div>
            </div>

            <div class="page" id="trap">
                <div class="page-header">
                    <h2>Trap</h2>
                    <p class="page-description">As batidas mais pesadas e os maiores sucessos do Trap.</p>
                </div>
                <div class="grid-container" id="trapMusic">
                    <!-- Music cards will be inserted here by JavaScript -->
                </div>
            </div>

            <div class="page" id="gospel">
                <div class="page-header">
                    <h2>Gospel</h2>
                    <p class="page-description">Músicas inspiradoras e espirituais para elevar sua alma.</p>
                </div>
                <div class="grid-container" id="gospelMusic">
                    <!-- Music cards will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Artist page -->
            <div class="artist-page" id="artistPage">
                <div class="artist-header">
                    <img src="" alt="Artist Image" class="artist-image" id="artistImage">
                    <div class="artist-details">
                        <h2 class="artist-name-large" id="artistNameLarge"></h2>
                        <p class="artist-genre-large" id="artistGenreLarge"></p>
                        <p class="artist-bio" id="artistBio">Este artista tem contribuído significativamente para a cena musical com suas músicas cativantes e performances memoráveis.</p>
                    </div>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-music"></i> Músicas
                </h2>
                <div class="grid-container" id="artistSongs">
                    <!-- Artist's songs will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Album page -->
            <div class="album-page" id="albumPage">
                <div class="album-header">
                    <img src="" alt="Album Cover" class="album-image" id="albumImage">
                    <div class="album-details">
                        <h2 class="album-title-large" id="albumTitleLarge"></h2>
                        <p class="album-artist-large" id="albumArtistLarge"></p>
                        <p class="album-description" id="albumDescription">Este álbum apresenta uma coleção de músicas que mostram a versatilidade e criatividade do artista.</p>
                    </div>
                </div>
                <h2 class="section-title">
                    <i class="fas fa-music"></i> Faixas
                </h2>
                <div class="grid-container" id="albumSongs">
                    <!-- Album's songs will be inserted here by JavaScript -->
                </div>
            </div>

            <!-- Search results -->
            <div class="search-results" id="searchResults">
                <h2 class="search-title">Resultados para "<span id="searchQuery"></span>"</h2>
                <div class="grid-container" id="searchResultsGrid">
                    <!-- Search results will be inserted here by JavaScript -->
                </div>
                <div class="search-empty" id="searchEmpty" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>Nenhum resultado encontrado</h3>
                    <p>Tente buscar por outros termos ou navegue pelas categorias.</p>
                </div>
            </div>
        </div>

        <!-- Music Player - FULLSCREEN -->
        <div class="music-player-container" id="musicPlayer">
            <div class="music-player">
                <div class="player-header">
                    <div class="player-title">Reproduzindo</div>
                    <div class="player-controls">
                        <button class="minimize-player" onclick="minimizePlayer()" title="Minimizar">
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <button class="close-player" onclick="closePlayer()" title="Fechar">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="player-cover">
                    <img id="playerCover" src="" alt="Capa do álbum">
                </div>
                <div class="player-info">
                    <h3 class="player-song-title" id="playerTitle"></h3>
                    <p class="player-song-artist" id="playerArtist"></p>
                    <p class="player-song-details" id="playerDetails"></p>
                    <div class="progress-container" id="progressContainer">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="time-container">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                    <div class="controls">
                        <button class="control-btn" id="shuffleBtn" title="Aleatório">
                            <i class="fas fa-random"></i>
                        </button>
                        <button class="control-btn" id="prevBtn" title="Anterior">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="control-btn main" id="playBtn" title="Reproduzir/Pausar">
                            <i class="fas fa-play" id="playIcon"></i>
                        </button>
                        <button class="control-btn" id="nextBtn" title="Próximo">
                            <i class="fas fa-step-forward"></i>
                        </button>
                        <button class="control-btn" id="repeatBtn" title="Repetir">
                            <i class="fas fa-redo"></i>
                        </button>
                    </div>
                    <a href="#" class="download-btn" id="downloadBtn" target="_blank">
                        <i class="fas fa-download"></i> Download
                    </a>
                </div>
            </div>
        </div>

        <!-- Mini Player -->
        <div class="mini-player" id="miniPlayer">
            <div class="mini-progress" id="miniProgress"></div>
            <div class="mini-player-content">
                <div class="mini-player-cover" onclick="expandPlayer()">
                    <img id="miniPlayerCover" src="" alt="Capa">
                </div>
                <div class="mini-player-info" onclick="expandPlayer()">
                    <div class="mini-player-title" id="miniPlayerTitle"></div>
                    <div class="mini-player-artist" id="miniPlayerArtist"></div>
                </div>
                <div class="mini-player-controls">
                    <button class="mini-control-btn" id="miniPrevBtn">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="mini-control-btn" id="miniPlayBtn">
                        <i class="fas fa-play" id="miniPlayIcon"></i>
                    </button>
                    <button class="mini-control-btn" id="miniNextBtn">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="mini-control-btn" onclick="closePlayer()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading indicator with headphones -->
        <div class="loading" id="loading">
            <div>
                <div class="musical-loader">
                    <div class="headphones-icon">
                        <i class="fas fa-headphones"></i>
                    </div>
                    <div class="loading-dots">
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                        <div class="loading-dot"></div>
                    </div>
                </div>
                <div class="loading-text">Carregando música...</div>
            </div>
        </div>
    </div>

    <script>
        // Check for dark mode preference and set theme
        function setTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        }
        
        // Initialize theme
        setTheme();
        
        // Listen for theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            setTheme();
        });

        // Supabase configuration
        const supabaseUrl = 'https://aejenqzfjqoerwmkejup.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFlamVucXpmanFvZXJ3bWtlanVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3ODc1NjksImV4cCI6MjA2NDM2MzU2OX0.w0Ouv3Io6EIutqluv1i9AFHa3_sOuYwHxabAL6f6Q1U';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Global variables
        let currentSong = null;
        let isPlaying = false;
        let shuffle = false;
        let repeat = false;
        let audioPlayer;
        let updateTimer;
        let musicData = [];
        let artistsData = [];
        let albumsData = [];
        let isPlayerMinimized = false;

        // Platform integration functions
        const PlatformIntegration = {
            // YouTube integration
            youtube: {
                extractVideoId(url) {
                    const match = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);
                    return match ? match[1] : null;
                },
                
                createEmbedUrl(videoId) {
                    return `https://www.youtube.com/embed/${videoId}?autoplay=1&controls=1`;
                },
                
                isYouTubeUrl(url) {
                    return url.includes('youtube.com') || url.includes('youtu.be');
                }
            },

            // Spotify integration
            spotify: {
                extractTrackId(url) {
                    const match = url.match(/spotify\.com\/track\/([^?]+)/);
                    return match ? match[1] : null;
                },
                
                createEmbedUrl(trackId) {
                    return `https://open.spotify.com/embed/track/${trackId}`;
                },
                
                isSpotifyUrl(url) {
                    return url.includes('spotify.com');
                }
            },

            // SoundCloud integration
            soundcloud: {
                createEmbedUrl(url) {
                    return `https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}&auto_play=true&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=true`;
                },
                
                isSoundCloudUrl(url) {
                    return url.includes('soundcloud.com');
                }
            },

            // Main function to handle platform-specific playback
            handlePlatformPlayback(song) {
                const audioUrl = song.audio_url || '';
                
                if (this.youtube.isYouTubeUrl(audioUrl)) {
                    const videoId = this.youtube.extractVideoId(audioUrl);
                    if (videoId) {
                        this.createPlatformPlayer(this.youtube.createEmbedUrl(videoId), 'YouTube');
                        return true;
                    }
                } else if (this.spotify.isSpotifyUrl(audioUrl)) {
                    const trackId = this.spotify.extractTrackId(audioUrl);
                    if (trackId) {
                        this.createPlatformPlayer(this.spotify.createEmbedUrl(trackId), 'Spotify');
                        return true;
                    }
                } else if (this.soundcloud.isSoundCloudUrl(audioUrl)) {
                    this.createPlatformPlayer(this.soundcloud.createEmbedUrl(audioUrl), 'SoundCloud');
                    return true;
                }
                
                return false; // Use default audio player
            },

            createPlatformPlayer(embedUrl, platform) {
                // Create iframe for external platform
                const iframe = document.createElement('iframe');
                iframe.src = embedUrl;
                iframe.width = '100%';
                iframe.height = '300';
                iframe.frameBorder = '0';
                iframe.allow = 'autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture';
                iframe.loading = 'lazy';
                iframe.style.borderRadius = '20px';
                
                // Replace player cover with iframe
                const playerCover = document.getElementById('playerCover').parentElement;
                playerCover.innerHTML = '';
                playerCover.appendChild(iframe);
                
                // Update player title to show platform
                document.querySelector('.player-title').textContent = `Reproduzindo via ${platform}`;
                
                // Hide some controls that won't work with external platforms
                document.getElementById('progressContainer').style.display = 'none';
                document.querySelector('.time-container').style.display = 'none';
                document.getElementById('downloadBtn').style.display = 'none';
            }
        };

        // DOM Elements
        const musicPlayer = document.getElementById('musicPlayer');
        const miniPlayer = document.getElementById('miniPlayer');
        const playerCover = document.getElementById('playerCover');
        const playerTitle = document.getElementById('playerTitle');
        const playerArtist = document.getElementById('playerArtist');
        const playerDetails = document.getElementById('playerDetails');
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.getElementById('progressContainer');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const loading = document.getElementById('loading');
        const searchInput = document.getElementById('searchInput');
        
        // Mini player elements
        const miniPlayerCover = document.getElementById('miniPlayerCover');
        const miniPlayerTitle = document.getElementById('miniPlayerTitle');
        const miniPlayerArtist = document.getElementById('miniPlayerArtist');
        const miniProgress = document.getElementById('miniProgress');
        const miniPlayBtn = document.getElementById('miniPlayBtn');
        const miniPlayIcon = document.getElementById('miniPlayIcon');
        const miniPrevBtn = document.getElementById('miniPrevBtn');
        const miniNextBtn = document.getElementById('miniNextBtn');

        // Other DOM elements
        const artistPage = document.getElementById('artistPage');
        const artistImage = document.getElementById('artistImage');
        const artistNameLarge = document.getElementById('artistNameLarge');
        const artistGenreLarge = document.getElementById('artistGenreLarge');
        const artistSongs = document.getElementById('artistSongs');
        const albumPage = document.getElementById('albumPage');
        const albumImage = document.getElementById('albumImage');
        const albumTitleLarge = document.getElementById('albumTitleLarge');
        const albumArtistLarge = document.getElementById('albumArtistLarge');
        const albumSongs = document.getElementById('albumSongs');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                showLoading();
                
                // Load data from Supabase
                await loadMusicData();
                await loadArtistsData();
                await loadAlbumsData();
                
                // Display music data on the home page
                displayRecentMusic();
                displayPopularMusic();
                
                // Display all content on their respective pages
                displayAllMusic();
                displayAllArtists();
                displayAllAlbums();
                
                // Display genre-specific music
                displayGenreMusic('kizomba', 'kizombaMusic');
                displayGenreMusic('rap', 'rapMusic');
                displayGenreMusic('trap', 'trapMusic');
                displayGenreMusic('gospel', 'gospelMusic');
                
                hideLoading();
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                showError('Erro ao carregar as músicas. Tente atualizar a página.');
                hideLoading();
            }
            
            // Add event listener to search input
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    search();
                }
            });
            
            // Initialize Howler.js for audio
            Howler.html5PoolSize = 10;
            
            // Setup event listeners for player
            setupPlayerControls();
        });

        // Player control functions
        function minimizePlayer() {
            musicPlayer.style.display = 'none';
            miniPlayer.classList.add('active');
            isPlayerMinimized = true;
            
            // Update mini player info
            updateMiniPlayer();
        }

        function expandPlayer() {
            musicPlayer.style.display = 'flex';
            miniPlayer.classList.remove('active');
            isPlayerMinimized = false;
        }

        function updateMiniPlayer() {
            if (currentSong) {
                miniPlayerCover.src = currentSong.capa_url || 'https://picsum.photos/300/300';
                miniPlayerTitle.textContent = currentSong.titulo;
                miniPlayerArtist.textContent = currentSong.artista;
                
                // Sync play/pause state
                if (isPlaying) {
                    miniPlayIcon.classList.remove('fa-play');
                    miniPlayIcon.classList.add('fa-pause');
                } else {
                    miniPlayIcon.classList.remove('fa-pause');
                    miniPlayIcon.classList.add('fa-play');
                }
            }
        }

        // Toggle FAQ items
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('i');
            
            // Close other open FAQ items
            document.querySelectorAll('.faq-answer.active').forEach(item => {
                if (item !== answer) {
                    item.classList.remove('active');
                    item.previousElementSibling.querySelector('i').style.transform = 'rotate(0deg)';
                }
            });
            
            // Toggle current FAQ item
            answer.classList.toggle('active');
            
            if (answer.classList.contains('active')) {
                icon.style.transform = 'rotate(180deg)';
            } else {
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // Load music data from Supabase
        async function loadMusicData() {
            try {
                const { data, error } = await supabase
                    .from('musicas')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                musicData = data || [];
            } catch (error) {
                console.error('Erro ao carregar músicas:', error);
                throw error;
            }
        }

        // Load artists data from Supabase
        async function loadArtistsData() {
            try {
                const { data, error } = await supabase
                    .from('artistas')
                    .select('*')
                    .order('nome');
                
                if (error) throw error;
                
                artistsData = data || [];
            } catch (error) {
                console.error('Erro ao carregar artistas:', error);
                throw error;
            }
        }

        // Load albums data from Supabase
        async function loadAlbumsData() {
            try {
                const { data, error } = await supabase
                    .from('albuns')
                    .select('*')
                    .order('ano', { ascending: false });
                
                if (error) throw error;
                
                albumsData = data || [];
            } catch (error) {
                console.error('Erro ao carregar álbuns:', error);
                throw error;
            }
        }

        // Display recently added music
        function displayRecentMusic() {
            const recentMusic = document.getElementById('recentMusic');
            recentMusic.innerHTML = '';
            
            if (musicData.length === 0) {
                recentMusic.innerHTML = '<div class="empty-state"><i class="fas fa-music"></i><h3>Nenhuma música disponível</h3><p>As músicas aparecerão aqui quando forem adicionadas.</p></div>';
                return;
            }
            
            // Get last 10 songs
            const recent = musicData.slice(0, 10);
            
            recent.forEach(song => {
                recentMusic.appendChild(createMusicCard(song));
            });
        }

        // Display popular music
        function displayPopularMusic() {
            const popularMusic = document.getElementById('popularMusic');
            popularMusic.innerHTML = '';
            
            if (musicData.length === 0) {
                popularMusic.innerHTML = '<div class="empty-state"><i class="fas fa-fire"></i><h3>Nenhuma música popular</h3><p>As músicas populares aparecerão aqui.</p></div>';
                return;
            }
            
            // Shuffle and get random 10 songs for "popular"
            const popular = [...musicData].sort(() => 0.5 - Math.random()).slice(0, 10);
            
            popular.forEach(song => {
                popularMusic.appendChild(createMusicCard(song));
            });
        }

        // Display all music
        function displayAllMusic() {
            const allMusic = document.getElementById('allMusic');
            allMusic.innerHTML = '';
            
            if (musicData.length === 0) {
                allMusic.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;"><i class="fas fa-music"></i><h3>Nenhuma música disponível</h3><p>As músicas aparecerão aqui quando forem adicionadas.</p></div>';
                return;
            }
            
            musicData.forEach(song => {
                allMusic.appendChild(createMusicCard(song, 'grid'));
            });
        }

        // Display all artists
        function displayAllArtists() {
            const allArtists = document.getElementById('allArtists');
            allArtists.innerHTML = '';
            
            if (artistsData.length === 0) {
                allArtists.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;"><i class="fas fa-users"></i><h3>Nenhum artista disponível</h3><p>Os artistas aparecerão aqui quando forem adicionados.</p></div>';
                return;
            }
            
            artistsData.forEach(artist => {
                const card = createArtistCard(artist);
                card.addEventListener('click', () => {
                    showArtistPage(artist);
                });
                allArtists.appendChild(card);
            });
        }

        // Display all albums
        function displayAllAlbums() {
            const allAlbums = document.getElementById('allAlbums');
            allAlbums.innerHTML = '';
            
            if (albumsData.length === 0) {
                allAlbums.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;"><i class="fas fa-compact-disc"></i><h3>Nenhum álbum disponível</h3><p>Os álbuns aparecerão aqui quando forem adicionados.</p></div>';
                return;
            }
            
            albumsData.forEach(album => {
                const card = createAlbumCard(album);
                card.addEventListener('click', () => {
                    showAlbumPage(album);
                });
                allAlbums.appendChild(card);
            });
        }

        // Display genre-specific music
        function displayGenreMusic(genre, elementId) {
            const genreMusic = document.getElementById(elementId);
            genreMusic.innerHTML = '';
            
            const filteredMusic = musicData.filter(song => song.genero === genre);
            
            if (filteredMusic.length === 0) {
                genreMusic.innerHTML = '<div class="empty-state" style="grid-column: 1/-1;"><i class="fas fa-music"></i><h3>Nenhuma música deste gênero</h3><p>As músicas deste gênero aparecerão aqui quando forem adicionadas.</p></div>';
                return;
            }
            
            filteredMusic.forEach(song => {
                genreMusic.appendChild(createMusicCard(song, 'grid'));
            });
        }

        // Create a music card element
        function createMusicCard(song, layout = 'scroll') {
            const card = document.createElement('div');
            card.classList.add('music-card');
            card.classList.add('fade-in');
            
            if (layout === 'grid') {
                card.style.width = '100%';
            }

            // Determine platform indicator
            let platformIndicator = '';
            const audioUrl = song.audio_url || '';
            if (PlatformIntegration.youtube.isYouTubeUrl(audioUrl)) {
                platformIndicator = '<div class="platform-indicator"><i class="fab fa-youtube"></i> YouTube</div>';
            } else if (PlatformIntegration.spotify.isSpotifyUrl(audioUrl)) {
                platformIndicator = '<div class="platform-indicator"><i class="fab fa-spotify"></i> Spotify</div>';
            } else if (PlatformIntegration.soundcloud.isSoundCloudUrl(audioUrl)) {
                platformIndicator = '<div class="platform-indicator"><i class="fab fa-soundcloud"></i> SoundCloud</div>';
            }
            
            card.innerHTML = `
                <div class="music-cover">
                    <img src="${song.capa_url || 'https://picsum.photos/300/300'}" alt="${song.titulo}" onerror="this.src='https://picsum.photos/300/300'">
                    ${platformIndicator}
                    <div class="play-overlay">
                        <button class="play-btn">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>
                <div class="music-info">
                    <h3 class="music-title">${song.titulo}</h3>
                    <p class="music-artist">${song.artista}</p>
                    <div class="music-details">
                        <span>${song.album || ''}</span>
                        <span>${song.ano || ''}</span>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => {
                playSong(song);
            });
            
            return card;
        }

        // Create an artist card element
        function createArtistCard(artist) {
            const card = document.createElement('div');
            card.classList.add('artist-card');
            card.classList.add('fade-in');
            
            card.innerHTML = `
                <img src="${artist.imagem_url || 'https://picsum.photos/300/300'}" alt="${artist.nome}" class="artist-img" onerror="this.src='https://picsum.photos/300/300'">
                <div class="artist-info">
                    <h3 class="artist-name">${artist.nome}</h3>
                    <p class="artist-genre">${artist.genero || 'Gênero não especificado'}</p>
                </div>
            `;
            
            return card;
        }

        // Create an album card element
        function createAlbumCard(album) {
            const card = document.createElement('div');
            card.classList.add('album-card');
            card.classList.add('fade-in');
            
            card.innerHTML = `
                <img src="${album.capa_url || 'https://picsum.photos/300/300'}" alt="${album.titulo}" class="album-cover" onerror="this.src='https://picsum.photos/300/300'">
                <div class="album-info">
                    <h3 class="album-title">${album.titulo}</h3>
                    <p class="album-artist">${album.artista}</p>
                    <div class="album-details">
                        <span>${album.ano || ''}</span>
                        <span>${album.num_faixas || 0} faixas</span>
                    </div>
                </div>
            `;
            
            return card;
        }

        // Show artist page with their songs
        function showArtistPage(artist) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('searchResults').classList.remove('active');
            
            // Update artist info
            artistImage.src = artist.imagem_url || 'https://picsum.photos/300/300';
            artistImage.onerror = () => { artistImage.src = 'https://picsum.photos/300/300'; };
            artistNameLarge.textContent = artist.nome;
            artistGenreLarge.textContent = artist.genero || 'Gênero não especificado';
            
            // Filter songs by artist
            artistSongs.innerHTML = '';
            const artistSongsList = musicData.filter(song => song.artista === artist.nome);
            
            if (artistSongsList.length > 0) {
                artistSongsList.forEach(song => {
                    artistSongs.appendChild(createMusicCard(song, 'grid'));
                });
            } else {
                artistSongs.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--text-secondary);">Nenhuma música encontrada para este artista.</p>';
            }
            
            // Show artist page
            artistPage.classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Show album page with its songs
        function showAlbumPage(album) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('searchResults').classList.remove('active');
            
            // Update album info
            albumImage.src = album.capa_url || 'https://picsum.photos/300/300';
            albumImage.onerror = () => { albumImage.src = 'https://picsum.photos/300/300'; };
            albumTitleLarge.textContent = album.titulo;
            albumArtistLarge.textContent = album.artista;
            
            // Filter songs by album
            albumSongs.innerHTML = '';
            const albumSongsList = musicData.filter(song => song.album === album.titulo && song.artista === album.artista);
            
            if (albumSongsList.length > 0) {
                albumSongsList.forEach(song => {
                    albumSongs.appendChild(createMusicCard(song, 'grid'));
                });
            } else {
                albumSongs.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--text-secondary);">Nenhuma música encontrada para este álbum.</p>';
            }
            
            // Show album page
            albumPage.classList.add('active');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Play a song
        function playSong(song) {
            showLoading();
            
            // If there's an existing song playing, destroy it
            if (audioPlayer) {
                audioPlayer.stop();
                audioPlayer.unload();
                clearInterval(updateTimer);
            }
            
            currentSong = song;
            
            // Update player UI
            playerCover.src = song.capa_url || 'https://picsum.photos/300/300';
            playerCover.onerror = () => { playerCover.src = 'https://picsum.photos/300/300'; };
            playerTitle.textContent = song.titulo;
            playerArtist.textContent = song.artista;
            playerDetails.textContent = `${song.album || ''} • ${song.ano || ''}`;
            downloadBtn.href = song.audio_url || '#';
            
            // Reset player display elements
            document.getElementById('progressContainer').style.display = 'block';
            document.querySelector('.time-container').style.display = 'flex';
            document.getElementById('downloadBtn').style.display = 'flex';
            
            // Format duration for display
            const minutes = Math.floor((song.duracao || 0) / 60);
            const seconds = (song.duracao || 0) % 60;
            durationEl.textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
            
            // Check if this is a platform-specific URL
            if (PlatformIntegration.handlePlatformPlayback(song)) {
                // Platform player created, show player and hide loading
                musicPlayer.style.display = 'flex';
                miniPlayer.classList.remove('active');
                isPlayerMinimized = false;
                hideLoading();
                
                // Update mini player info
                updateMiniPlayer();
                return;
            }
            
            // Create new audio player for regular audio files
            if (song.audio_url) {
                audioPlayer = new Howl({
                    src: [song.audio_url],
                    html5: true,
                    onplay: function() {
                        isPlaying = true;
                        playIcon.classList.remove('fa-play');
                        playIcon.classList.add('fa-pause');
                        updateTimer = setInterval(updateProgress, 1000);
                        hideLoading();
                        updateMiniPlayer();
                    },
                    onpause: function() {
                        isPlaying = false;
                        playIcon.classList.remove('fa-pause');
                        playIcon.classList.add('fa-play');
                        clearInterval(updateTimer);
                        updateMiniPlayer();
                    },
                    onstop: function() {
                        isPlaying = false;
                        playIcon.classList.remove('fa-pause');
                        playIcon.classList.add('fa-play');
                        clearInterval(updateTimer);
                        updateMiniPlayer();
                    },
                    onend: function() {
                        if (repeat) {
                            audioPlayer.play();
                        } else {
                            nextSong();
                        }
                    },
                    onloaderror: function() {
                        alert('Erro ao carregar áudio. Tente novamente mais tarde.');
                        hideLoading();
                        closePlayer();
                    }
                });
                
                // Show player and start playing
                setTimeout(() => {
                    musicPlayer.style.display = 'flex';
                    miniPlayer.classList.remove('active');
                    isPlayerMinimized = false;
                    audioPlayer.play();
                }, 800);
            } else {
                alert('URL de áudio não disponível para esta música.');
                hideLoading();
            }
        }

        // Set up player controls
        function setupPlayerControls() {
            // Play/Pause button
            playBtn.addEventListener('click', togglePlay);
            miniPlayBtn.addEventListener('click', togglePlay);
            
            // Next button
            nextBtn.addEventListener('click', nextSong);
            miniNextBtn.addEventListener('click', nextSong);
            
            // Previous button
            prevBtn.addEventListener('click', prevSong);
            miniPrevBtn.addEventListener('click', prevSong);
            
            // Shuffle button
            shuffleBtn.addEventListener('click', toggleShuffle);
            
            // Repeat button
            repeatBtn.addEventListener('click', toggleRepeat);
            
            // Progress bar click
            progressContainer.addEventListener('click', setProgress);
        }

        // Toggle play/pause
        function togglePlay() {
            if (!audioPlayer) return;
            
            if (isPlaying) {
                audioPlayer.pause();
            } else {
                audioPlayer.play();
            }
        }

        // Play next song
        function nextSong() {
            if (!currentSong || musicData.length === 0) return;
            
            let nextIndex;
            
            if (shuffle) {
                // Play random song if shuffle is on
                nextIndex = Math.floor(Math.random() * musicData.length);
            } else {
                // Find current index and play next
                const currentIndex = musicData.findIndex(song => song.id === currentSong.id);
                nextIndex = (currentIndex + 1) % musicData.length;
            }
            
            playSong(musicData[nextIndex]);
        }

        // Play previous song
        function prevSong() {
            if (!currentSong || musicData.length === 0) return;
            
            // Find current index
            const currentIndex = musicData.findIndex(song => song.id === currentSong.id);
            
            // Play previous or last song
            let prevIndex = currentIndex - 1;
            if (prevIndex < 0) prevIndex = musicData.length - 1;
            
            playSong(musicData[prevIndex]);
        }

        // Toggle shuffle mode
        function toggleShuffle() {
            shuffle = !shuffle;
            
            if (shuffle) {
                shuffleBtn.style.color = 'var(--primary-color)';
            } else {
                shuffleBtn.style.color = 'var(--text-primary)';
            }
        }

        // Toggle repeat mode
        function toggleRepeat() {
            repeat = !repeat;
            
            if (repeat) {
                repeatBtn.style.color = 'var(--primary-color)';
            } else {
                repeatBtn.style.color = 'var(--text-primary)';
            }
        }

        // Update progress bar
        function updateProgress() {
            if (!audioPlayer) return;
            
            const currentTime = audioPlayer.seek();
            const duration = audioPlayer.duration();
            
            // Update progress bar width
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            miniProgress.style.width = `${progressPercent}%`;
            
            // Update current time display
            const minutes = Math.floor(currentTime / 60);
            const seconds = Math.floor(currentTime % 60);
            currentTimeEl.textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        }

        // Set progress when clicking on progress bar
        function setProgress(e) {
            if (!audioPlayer) return;
            
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration();
            const clickedTime = (clickX / width) * duration;
            
            audioPlayer.seek(clickedTime);
        }

        // Close the player
        function closePlayer() {
            if (audioPlayer) {
                audioPlayer.stop();
                clearInterval(updateTimer);
                audioPlayer = null;
            }
            
            musicPlayer.style.display = 'none';
            miniPlayer.classList.remove('active');
            isPlayerMinimized = false;
            currentSong = null;
            isPlaying = false;
        }

        // Navigate between pages
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Hide search results and artist/album pages
            document.getElementById('searchResults').classList.remove('active');
            document.getElementById('artistPage').classList.remove('active');
            document.getElementById('albumPage').classList.remove('active');
            
            // Show the selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update active navigation link
            document.querySelectorAll('.sidebar-item').forEach(link => {
                link.classList.remove('active');
            });
            
            // Find and update the active link
            document.querySelectorAll('.sidebar-item').forEach(link => {
                if (link.getAttribute('onclick') === `showPage('${pageId}')`) {
                    link.classList.add('active');
                }
            });
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Navigate to genre page
        function showGenre(genreId) {
            showPage(genreId);
        }

        // Search functionality
        function search() {
            const query = searchInput.value.trim().toLowerCase();
            
            if (query === '') return;
            
            // Show loading
            showLoading();
            
            // Get search results from music
            const musicResults = musicData.filter(song => 
                song.titulo.toLowerCase().includes(query) || 
                song.artista.toLowerCase().includes(query) || 
                (song.album && song.album.toLowerCase().includes(query)) || 
                song.genero.toLowerCase().includes(query)
            );
            
            // Update search results page
            const searchResultsGrid = document.getElementById('searchResultsGrid');
            const searchEmpty = document.getElementById('searchEmpty');
            const searchQuery = document.getElementById('searchQuery');
            
            searchQuery.textContent = query;
            
            if (musicResults.length > 0) {
                searchResultsGrid.innerHTML = '';
                
                // Add music results
                musicResults.forEach(song => {
                    searchResultsGrid.appendChild(createMusicCard(song, 'grid'));
                });
                
                searchResultsGrid.style.display = 'grid';
                searchEmpty.style.display = 'none';
            } else {
                searchResultsGrid.style.display = 'none';
                searchEmpty.style.display = 'block';
            }
            
            // Hide all pages and show search results
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.getElementById('artistPage').classList.remove('active');
            document.getElementById('albumPage').classList.remove('active');
            document.getElementById('searchResults').classList.add('active');
            
            // Hide loading
            hideLoading();
            
            // Clear search input
            searchInput.value = '';
        }

        // Scroll music containers
        function scrollMusic(containerId, direction) {
            const container = document.getElementById(`${containerId}Music`);
            const scrollAmount = direction * 300;
            container.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });
        }

        // Show loading indicator
        function showLoading() {
            loading.classList.add('active');
        }

        // Hide loading indicator
        function hideLoading() {
            loading.classList.remove('active');
        }

        // Show error message
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            
            // Insert at the top of main content
            const main = document.querySelector('.content-area');
            main.insertBefore(errorDiv, main.firstChild);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 5000);
        }
    </script>
</body>
</html>
